"use strict";!function(){const e="https://spectralharp.github.io/weird-flex/",t="audio/pickup.mp3",n="audio/dropdown.mp3",r="audio/trash.mp3",a="audio/add.mp3",i="image/trashcan_close.png",o="image/trashcan_open.png";function l(e){e.addEventListener("dragstart",f),e.addEventListener("dragend",h)}function c(){k("container-style").innerText="#boxes-container {"+k("container-input").value+"}",u()}function d(){k("item-style").innerText=".selected {"+k("item-input").value+"}"}function u(){let e=k("boxes-container"),t=window.getComputedStyle(e),n="wrap-reverse"!==t.flexWrap;switch(t.flexDirection){case"column":s("vertical","","arrow-head-down",!0),n?s("horizontal","","arrow-head-right",!1):s("horizontal","arrow-head-left","",!1);break;case"column-reverse":s("vertical","arrow-head-up","",!0),n?s("horizontal","","arrow-head-right",!1):s("horizontal","arrow-head-left","",!1);break;case"row-reverse":s("horizontal","arrow-head-left","",!0),n?s("vertical","","arrow-head-down",!1):s("vertical","arrow-head-up","",!1);break;default:s("horizontal","","arrow-head-right",!0),n?s("vertical","","arrow-head-down",!1):s("vertical","arrow-head-up","",!1)}}function s(e,t,n,r){k(e).firstElementChild.className=t,k(e).lastElementChild.className=n,k(e).className=r?"red":"blue",k(e).querySelector("span").innerText=r?"main axis":"cross axis"}function p(e,t){let n=e.parentElement.dataset.property,r=new RegExp(`(${n} *: *)[\\w-%]*`);r.test(k(t).value)?k(t).value=k(t).value.replace(r,`$1${e.innerText}`):k(t).value+="\n"+n+": "+e.innerText+";",c(),d()}function f(e){this.style.opacity=0,e.dataTransfer.setData("text",e.target.id),S(t)}function h(){this.style.opacity=1,S(n)}function v(e){e.preventDefault(),e.target.src=o}function m(e){e.preventDefault(),e.target.src=i}function g(e){e.preventDefault(),S(r),e.target.src=i;let t=e.dataTransfer.getData("text");document.getElementById(t).remove(),x()}function w(){S(a);let e=document.createElement("div");e.classList.add("box"),e.draggable=!0,e.addEventListener("click",y),l(e),k("boxes-container").appendChild(e),x()}function x(){let e=document.querySelectorAll(".box");for(let t=0;t<e.length;t++)e[t].innerText=t,e[t].id="box-"+t}function E(){this.classList.toggle("active");let e=this.nextElementSibling;e.style.display="block"===e.style.display?"none":"block"}function y(){this.classList.toggle("selected")}function b(e,t){let n=t;return-1!==window.location.href.indexOf(e)&&(n=decodeURIComponent(function(){let e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,r){e[n]=r}),e}()[e])),n}function L(){k("url-output").value=e+function(e){if(0===e.length)return"";let t=[];for(let n in e)e.hasOwnProperty(n)&&0!==e[n].length&&t.push(`${n}=${e[n]}`);if(0===t.length)return"";let n="?";return n+=t.join("&")}({container:encodeURIComponent(k("container-input").value),selected:encodeURIComponent(k("item-input").value)})}function k(e){return document.getElementById(e)}function S(e){new Audio(e).play()}window.addEventListener("load",function(){k("container-input").addEventListener("input",c),k("item-input").addEventListener("input",d),k("add-box").addEventListener("click",w),k("delete-drop").addEventListener("dragover",v),k("delete-drop").addEventListener("dragleave",m),k("delete-drop").addEventListener("drop",g),k("get-url-btn").addEventListener("click",L),k("container-input").value=b("container",""),k("item-input").value=b("selected",""),function(){let e=document.querySelectorAll(".collapse");for(let t=0;t<e.length;t++)e[t].addEventListener("click",E)}(),function(){let e=document.querySelectorAll("#container-flex-properties .value-btn");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){p(e[t],"container-input")});let t=document.querySelectorAll("#item-flex-properties .value-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){p(t[e],"item-input")})}(),function(){let e=document.querySelectorAll(".box");for(let t=0;t<e.length;t++)e[t].addEventListener("click",y),e[t].id="box-"+t,l(e[t])}(),c(),u(),d()})}();
